webpackJsonp([5],{MkM9:function(t,e){},iJBP:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("G0J2");var n=o("mw3O"),s=o.n(n),i={components:{wMenu:o("zIkb").default,wFooter:o("mzkE").default},data:function(){return{BASE_URL:"http://www.panzhihui.cn/watermelon",BASE_API:"http://www.panzhihui.cn/watermelon_api/",query_content:"",new_solution_is_show:!1,datalist:[{date:"2019-01-01",content:"今日内容"}],new_solution_title:"",new_solution_content:"",editorOption:{modules:{toolbar:[["bold","italic","underline","strike",{header:[]},{size:[]}],["code-block",{list:"ordered"},{list:"bullet"}]]}}}},methods:{query:function(){var t=this;this.$axios.post(this.BASE_API+"solution/select",s.a.stringify({content:this.query_content}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){if(console.log(e),1==e.data.success){var o=sessionStorage.getItem("customerId");if(o)for(var n in e.data.data)o==e.data.data[n].customerId&&(e.data.data[n].mysolution=!0);t.datalist=e.data.data.list}else alert(e.data.message)}).catch(function(t){console.log(t)})},new_solution_button:function(){var t=this;this.$axios.post(this.BASE_API+"solution/insert",s.a.stringify({title:this.new_solution_title,content:this.new_solution_content}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){console.log(e),1==e.data.success?(t.new_solution_title="",t.new_solution_content="",t.new_solution_is_show=!1,t.query()):alert(e.data.message)}).catch(function(t){console.log(t)})},show_new_solution:function(){this.new_solution_is_show?this.new_solution_is_show=!1:this.new_solution_is_show=!0},click_edit_solution:function(t){this.datalist[t].edit?this.datalist[t].edit=!1:this.datalist[t].edit=!0,console.log("change edit to = "+this.datalist[t].edit),this.new_solution_is_show=!this.new_solution_is_show,this.new_solution_is_show=!this.new_solution_is_show},save_edit_solution_button:function(t,e){var o=this;this.$axios.post(this.BASE_API+"solution/update",s.a.stringify({id:e.id,title:e.title,content:e.content}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){console.log(t),1==t.data.success?o.$message({showClose:!0,message:"保存成功",type:"success"}):(alert(t.data.message),o.$message({showClose:!0,type:"error",message:t.data.message}))}).catch(function(t){console.log(t)})},save_edit_solution_button_close:function(t,e){var o=this;this.$axios.post(this.BASE_API+"solution/update",s.a.stringify({id:e.id,title:e.title,content:e.content}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){console.log(e),1==e.data.success?(o.datalist[t].edit?o.datalist[t].edit=!1:o.datalist[t].edit=!0,console.log("change edit to = "+o.datalist[t].edit),o.new_solution_is_show=!o.new_solution_is_show,o.new_solution_is_show=!o.new_solution_is_show,o.$message({showClose:!0,message:"保存成功",type:"success"})):o.$message({showClose:!0,type:"error",message:e.data.message})}).catch(function(t){console.log(t)})}},mounted:function(){this.query()}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"w-max-width"},[o("wMenu"),t._v(" "),o("el-form",{staticClass:"demo-form-inline w-aligncenter",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:""}},[o("el-input",{attrs:{placeholder:"请输入您需要查找的内容"},model:{value:t.query_content,callback:function(e){t.query_content=e},expression:"query_content"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")]),t._v(" "),t.new_solution_is_show?t._e():o("el-button",{attrs:{type:"primary"},on:{click:t.show_new_solution}},[t._v("新建方案")]),t._v(" "),t.new_solution_is_show?o("el-button",{attrs:{type:"primary"},on:{click:t.show_new_solution}},[t._v("关闭新建")]):t._e()],1)],1),t._v(" "),t.new_solution_is_show?o("div",[o("el-input",{attrs:{placeholder:"标题"},model:{value:t.new_solution_title,callback:function(e){t.new_solution_title=e},expression:"new_solution_title"}}),t._v(" "),o("quill-editor",{ref:"myQuillEditor",model:{value:t.new_solution_content,callback:function(e){t.new_solution_content=e},expression:"new_solution_content"}}),t._v(" "),o("div",{staticClass:"new_card_bottom"},[o("span",{staticClass:"w_new_solution_buttom",on:{click:t.new_solution_button}},[t._v("保存")])])],1):t._e(),t._v(" "),o("div",[o("el-collapse",t._l(t.datalist,function(e,n){return o("el-collapse-item",{key:n},[o("template",{slot:"title"},[t._v("\n\t\t\t\t"+t._s(e.title)+"\n\t\t\t")]),t._v(" "),e.edit?t._e():o("p",{domProps:{innerHTML:t._s(e.content)}}),t._v(" "),e.edit?o("p",[o("el-input",{attrs:{placeholder:"标题"},model:{value:e.title,callback:function(o){t.$set(e,"title",o)},expression:"item.title"}}),t._v(" "),o("quill-editor",{ref:"myQuillEditor",refInFor:!0,model:{value:e.content,callback:function(o){t.$set(e,"content",o)},expression:"item.content"}})],1):t._e(),t._v(" "),o("div",{staticClass:"card_bottom"},[e.mysolution?o("span",{staticClass:"card_bottom_item",on:{click:function(e){return t.click_edit_solution(n)}}},[t._v("编辑")]):t._e(),t._v(" "),e.edit?o("span",{staticClass:"card_bottom_item",on:{click:function(o){return t.save_edit_solution_button(n,e)}}},[t._v("保存")]):t._e(),t._v(" "),e.edit?o("span",{staticClass:"card_bottom_item",on:{click:function(o){return t.save_edit_solution_button_close(n,e)}}},[t._v("保存且关闭编辑")]):t._e()])],2)}),1)],1),t._v(" "),o("wFooter")],1)},staticRenderFns:[]};var a=o("VU/8")(i,l,!1,function(t){o("MkM9")},null,null);e.default=a.exports}});
//# sourceMappingURL=5.deceae092f0eb2ae2065.1571037191297.js.map